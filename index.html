<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä - ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Tiro+Devanagari+Hindi:wght@400;700&display=swap');
/* Updated Root Variables for Learning Theme */     
    :root {
       --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        --dark-gradient: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
        --card-bg-light: rgba(255, 255, 255, 0.25);
--card-bg-dark: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.18);
    --text-primary-light: #fff;
    --text-primary-dark: #e0e0e0;
    --text-secondary: rgba(255, 255, 255, 0.7);
    --accent-blue: #00f2fe; /* Cyan */
    --accent-green: #4facfe; /* Light Blue */
    --accent-purple: #764ba2; /* Original purple retained for some gradient depth */
    --shadow-glow: 0 0 40px rgba(79, 172, 254, 0.3); /* Blue glow */
}

/* Theme application */
[data-theme="light"] {
    --bg-gradient: var(--primary-gradient);
    --card-bg: var(--card-bg-light);
    --text-primary: var(--text-primary-light);
}

[data-theme="dark"] {
    --bg-gradient: var(--dark-gradient);
    --card-bg: var(--card-bg-dark);
    --text-primary: var(--text-primary-dark);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', 'Tiro Devanagari Hindi', sans-serif;
    background: var(--bg-gradient);
    min-height: 100vh;
    color: var(--text-primary);
    position: relative;
    overflow-x: hidden;
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Enhanced Floating Animation Background (Abstract/Learning related) */
.background-effects {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    overflow: hidden;
}

.floating-shapes {
    position: absolute;
    width: 100%;
    height: 100%;
}

.shape {
    position: absolute;
    font-size: 25px;
    color: rgba(255, 255, 255, 0.15); /* Subtle white/gray */
    animation: floatShape 20s linear infinite;
    opacity: 0;
    text-shadow: 0 0 8px rgba(0,0,0,0.2);
}

.shape:nth-child(1) { left: 15%; animation-delay: 0s; transform: scale(0.8); }
.shape:nth-child(2) { left: 25%; animation-delay: 3s; transform: scale(1.1); }
.shape:nth-child(3) { left: 35%; animation-delay: 6s; transform: scale(0.9); }
.shape:nth-child(4) { left: 45%; animation-delay: 1s; transform: scale(1.2); }
.shape:nth-child(5) { left: 55%; animation-delay: 4s; transform: scale(0.7); }
.shape:nth-child(6) { left: 65%; animation-delay: 7s; transform: scale(1.0); }
.shape:nth-child(7) { left: 75%; animation-delay: 2s; transform: scale(0.95); }
.shape:nth-child(8) { left: 85%; animation-delay: 5s; transform: scale(1.3); }

@keyframes floatShape {
    0% {
        transform: translateY(100vh) rotate(0deg) scale(0);
        opacity: 0;
    }
    10% {
        opacity: 0.6;
        transform: translateY(90vh) rotate(45deg) scale(1);
    }
    90% {
        opacity: 0.6;
        transform: translateY(-10vh) rotate(315deg) scale(1);
    }
    100% {
        transform: translateY(-20vh) rotate(360deg) scale(0);
        opacity: 0;
    }
}

/* Glassmorphism Enhanced Header */
.app-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 18px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(25px);
    -webkit-backdrop-filter: blur(25px);
    z-index: 100;
    border-bottom: 1px solid var(--glass-border);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}
.logo {
    font-size: 1.8rem;
    font-weight: 800;
    background: linear-gradient(45deg, var(--accent-green), var(--accent-blue), var(--accent-purple));
    background-size: 200% 200%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientShift 3s ease-in-out infinite;
    text-decoration: none;
    transition: transform 0.3s ease;
}

 .logo:hover {
    transform: scale(1.05);
}

.header-controls {
    display: flex;
    align-items: center;
    gap: 25px;
}

/* Coin display in header */
#user-coin-display { /* Renamed to user-coin-display from user-coin-count */
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    padding: 8px 15px;
    border-radius: 25px;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-primary);
    text-shadow: 0 0 5px rgba(255,255,0,0.5); /* A subtle glow */
    transition: all 0.3s ease;
}

#user-coin-display:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
}

#user-coin-display .fas.fa-coins { /* Font Awesome icon */
    color: gold;
    font-size: 1.3em;
}

/* Enhanced Theme Toggle */
.theme-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 32px;
}

.theme-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, #232526, #414345);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    border-radius: 34px;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.3);
}

.slider:before {
    position: absolute;
    content: "üåô";
    display: flex;
    align-items: center;
    justify-content: center;
    height: 26px;
    width: 26px;
    left: 3px;
    bottom: 3px;
    background: linear-gradient(45deg, #667eea, #764ba2);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    border-radius: 50%;
    font-size: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

input:checked + .slider {
    background: linear-gradient(45deg, #667eea, #764ba2);
}

input:checked + .slider:before {
    transform: translateX(28px);
    content: "‚òÄÔ∏è";
    background: linear-gradient(45deg, #ffd89b, #19547b);
}




.menu-btn {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    color: var(--text-primary);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 12px;
    border-radius: 15px;
    transition: all 0.3s ease;
}

.menu-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}

/* Enhanced Side Menu */
#side-menu {
    position: fixed;
    top: 0;
    right: -100%;
    width: 350px;
    height: 100%;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    z-index: 101;
    transition: right 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    overflow-y: auto;
    border-left: 1px solid var(--glass-border);
    padding: 90px 0 20px 0; /* Adjusted padding to accommodate close button */
    box-shadow: -10px 0 50px rgba(0,0,0,0.3);
    display: flex; /* Use flexbox for layout */
    flex-direction: column; /* Stack children vertically */
}

#side-menu.open {
    right: 0;
}

#side-menu::-webkit-scrollbar { width: 6px; }
#side-menu::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); }
#side-menu::-webkit-scrollbar-thumb { background: linear-gradient(45deg, var(--accent-green), var(--accent-blue)); border-radius: 10px; }

/* New container for scrollable content */
#side-menu-content-container {
    flex-grow: 1; /* Allow it to take available space */
    overflow-y: auto; /* Make this section scrollable */
    padding-top: 20px; /* Add some padding if needed */
}
#side-menu-content-container::-webkit-scrollbar { width: 6px; }
#side-menu-content-container::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
#side-menu-content-container::-webkit-scrollbar-thumb { background: linear-gradient(45deg, var(--accent-green), var(--accent-blue)); border-radius: 10px; }


#side-menu h3 {
    padding: 15px 30px 10px;
    color: var(--text-secondary);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-top: 20px;
    font-weight: 600;
    background: linear-gradient(45deg, var(--accent-green), var(--accent-blue));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}

#side-menu a {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 18px 30px;
    text-decoration: none;
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: 500;
    transition: all 0.3s ease;
    border-left: 3px solid transparent;
    position: relative;
    overflow: hidden;
}

#side-menu a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s ease;
}

#side-menu a:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateX(10px);
    border-left: 3px solid var(--accent-blue);
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
}
#side-menu a:hover::before { left: 100%; }

/* Side Menu Locked/Unlocked styles */
#side-menu a.locked-category {
    opacity: 0.7;
    filter: grayscale(80%);
}

#side-menu a.locked-category:hover {
    background: rgba(255, 0, 0, 0.08); /* Red tint on hover for locked */
    border-left: 3px solid #ff4d4d; /* Red border */
}

.lock-icon {
    margin-left: auto; /* Push to the right */
    background: linear-gradient(45deg, #ff4d4d, #ff9933); /* Red-orange gradient */
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 0.85em;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 15px;
    border: 1px solid rgba(255,255,255,0.1);
    white-space: nowrap; /* Prevent wrapping */
}


.menu-close-btn {
    position: absolute; /* Kept absolute, but now it's relative to side-menu */
    top: 25px;
    right: 25px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    color: var(--text-primary);
    font-size: 1.8rem;
    cursor: pointer;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 102; /* Ensure it's above the content container */
}

.menu-close-btn:hover {
    background: rgba(79, 172, 254, 0.2);
    transform: rotate(90deg) scale(1.1);
}

/* Enhanced Home Screen */
main { padding: 120px 20px 20px 20px; }

#home-screen {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: calc(100vh - 140px);
    text-align: center;
    animation: fadeIn 1.2s ease-out;
    position: relative;
    padding-bottom: 50px; /* Added space for the new button */
}

#home-screen::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 300px;
    height: 300px;
    background: radial-gradient(circle, rgba(79, 172, 254, 0.2) 0%, transparent 70%);
    border-radius: 50%;
    animation: pulse 4s ease-in-out infinite;
    z-index: -1;
}

#home-screen h1 {
    font-size: 4rem;
    font-weight: 800;
    background: linear-gradient(45deg, #00f2fe, #4facfe, #00cdac);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientShift 5s ease-in-out infinite, bounceIn 1s ease-out;
    margin-bottom: 20px;
    text-shadow: 0 10px 30px rgba(0,0,0,0.3);
    position: relative;
}

#home-screen h1::after {
    content: 'üñºÔ∏è'; /* Wallpaper icon */
    position: absolute;
    top: -20px;
    right: -30px;
    font-size: 2rem;
    animation: sparkle 2s ease-in-out infinite;
}

#home-screen p {
    font-size: 1.3rem;
    color: var(--text-secondary);
    margin-bottom: 40px;
    animation: fadeInUp 1.2s ease-out 0.3s;
    animation-fill-mode: backwards;
    font-weight: 500;
    max-width: 600px;
    line-height: 1.6;
}

.home-buttons {
    display: flex;
    gap: 20px; /* Space between buttons */
    flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
    justify-content: center;
    margin-top: 20px;
}

.cta-button, .share-app-button {
    background: linear-gradient(45deg, var(--accent-green), var(--accent-blue));
    background-size: 200% 200%;
    color: white;
    border: none;
    padding: 18px 45px;
    border-radius: 50px;
    font-size: 1.2rem;
    cursor: pointer;
    font-weight: 700;
    box-shadow: 0 15px 35px rgba(79, 172, 254, 0.4);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    animation: fadeInUp 1.2s ease-out 0.6s, gradientShift 3s ease-in-out infinite;
    animation-fill-mode: backwards;
    position: relative;
    overflow: hidden;
    display: inline-flex; /* To use gap for icon and text */
    align-items: center;
    gap: 10px;
}

.cta-button::before, .share-app-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.6s ease;
}

.cta-button:hover, .share-app-button:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 20px 40px rgba(79, 172, 254, 0.6);
    background-position: 100% 0;
}
.cta-button:hover::before, .share-app-button:hover::before { left: 100%; }

/* Share App Button specific styling if needed, currently same as cta-button */
.share-app-button {
    /* You can make it slightly different if you wish, e.g., different gradient */
    /* background: linear-gradient(45deg, #FFD700, #FFA500); */
    /* box-shadow: 0 15px 35px rgba(255, 215, 0, 0.4); */
}
/* .share-app-button:hover {
    box-shadow: 0 20px 40px rgba(255, 215, 0, 0.6);
} */


/* Enhanced Content View */
#content-view {
    display: none;
    padding: 20px;
    max-width: 1200px; /* Wider for wallpapers */
    margin: 0 auto;
    animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.content-header {
    text-align: center;
    margin-bottom: 40px;
    position: relative;
}

#back-btn {
    background: linear-gradient(45deg, var(--accent-green), var(--accent-blue));
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 50px;
    font-size: 1rem;
    cursor: pointer;
    margin-bottom: 25px;
    font-weight: 600;
    box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 10px;
}

#back-btn:hover {
    transform: translateY(-3px) translateX(-5px);
    box-shadow: 0 12px 30px rgba(79, 172, 254, 0.6);
}

#content-title {
    font-size: 2.5rem;
    color: var(--text-primary);
    margin: 0;
    text-shadow: 0 5px 15px rgba(0,0,0,0.3);
    font-weight: 700;
    background: linear-gradient(45deg, var(--accent-green), var(--accent-blue));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* --- NEW: Wallpaper Specific Styles --- */
#content-body {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); /* Responsive grid */
    gap: 25px;
}

.content-item {
    background: var(--card-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding: 20px; /* Reduced padding */
    border-radius: 25px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column; 
    align-items: center; /* Center image and text */
    border: 1px solid var(--glass-border);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    animation: fadeInUp 0.6s ease-out;
    position: relative;
    overflow: hidden;
    text-align: center; /* Center text inside item */
}

.content-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    transition: left 0.8s ease;
}

.content-item:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 25px 50px rgba(0,0,0,0.2), var(--shadow-glow);
    border: 1px solid rgba(79, 172, 254, 0.3);
}
.content-item:hover::before { left: 100%; }

.wallpaper-image {
    max-width: 100%;
    height: 200px; /* Fixed height for consistency in grid */
    object-fit: cover; /* Crop image to fit */
    border-radius: 15px;
    margin-bottom: 15px;
    transition: transform 0.3s ease;
    border: 1px solid rgba(255,255,255,0.1);
}

.content-item:hover .wallpaper-image {
    transform: scale(1.03); /* Subtle zoom on image hover */
}

.image-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 15px;
    line-height: 1.4;
}

.button-group { 
    display: flex; 
    gap: 10px; 
    align-items: center; 
    flex-wrap: wrap; 
    justify-content: center; /* Center buttons horizontally */
    width: 100%;
}

.download-btn, .set-wallpaper-btn, .share-btn {
    border: none;
    padding: 12px 20px;
    border-radius: 30px;
    cursor: pointer;
    font-size: 0.95rem;
    font-weight: 600;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    flex-grow: 1; /* Allow buttons to expand */
    justify-content: center; /* Center text and icon */
}

.download-btn { 
    background: linear-gradient(45deg, #4CAF50, #45a049); /* Green for Download */
    color: white; 
}
.set-wallpaper-btn { 
    background: linear-gradient(45deg, #2196F3, #1976D2); /* Blue for Set Wallpaper */
    color: white; 
}
.share-btn { /* Re-purposed for sharing image */
    background: linear-gradient(45deg, #FFD700, #FFA500); /* Gold for Share */
    color: white; 
}

.download-btn:hover { box-shadow: 0 12px 30px rgba(76, 175, 80, 0.4); transform: translateY(-3px); }
.set-wallpaper-btn:hover { box-shadow: 0 12px 30px rgba(33, 150, 243, 0.4); transform: translateY(-3px); }
.share-btn:hover { box-shadow: 0 12px 30px rgba(255, 215, 0, 0.4); transform: translateY(-3px); }


/* Enhanced Toast */
.toast {
    position: fixed;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(15px);
    color: white;
    padding: 18px 35px;
    border-radius: 50px;
    z-index: 1000;
    animation: toastSlideIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), toastSlideOut 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 2.5s forwards;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    font-weight: 600;
    font-size: 1rem;
    border: 1px solid rgba(255,255,255,0.1);
}

/* Enhanced Footer */
.app-footer {
    text-align: center;
    padding: 30px 20px;
    color: var(--text-secondary);
    font-size: 0.95rem;
    font-weight: 500;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    margin-top: 50px;
    border-top: 1px solid var(--glass-border);
}

/* Enhanced Animations */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideInUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes bounceIn { 0% { transform: scale(0.3); opacity: 0; } 50% { transform: scale(1.05); } 70% { transform: scale(0.9); } 100% { transform: scale(1); opacity: 1; } }
@keyframes fadeInUp { from { transform: translateY(40px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes gradientShift { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
@keyframes pulse { 0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; } 50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.6; } }
@keyframes sparkle { 0%, 100% { transform: rotate(0deg) scale(1); opacity: 0.7; } 50% { transform: rotate(180deg) scale(1.2); opacity: 1; } }
@keyframes toastSlideIn { from { transform: translateX(-50%) translateY(100px) scale(0.8); opacity: 0; } to { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; } }
@keyframes toastSlideOut { from { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; } to { opacity: 0; transform: translateX(-50%) translateY(-50px) scale(0.8); } }

/* Earn Coins Page Styles */
#earn-coins-page {
    display: none; /* Hidden by default */
    padding: 120px 20px 20px 20px;
    max-width: 900px;
    margin: 0 auto;
    animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

#earn-coins-page .header {
    text-align: center;
    margin-bottom: 30px;
}

#earn-coins-page h2 {
    font-size: 2.8rem;
    font-weight: 800;
    background: linear-gradient(45deg, #FFD700, #FFA500); /* Gold/Orange */
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 5px 15px rgba(0,0,0,0.3);
    margin-bottom: 10px;
}

#earn-coins-page p {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin-bottom: 20px;
}

#earn-coins-page .stats-grid {
    display: flex;
    justify-content: space-around;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

#earn-coins-page .stat-box {
    background: var(--card-bg);
    backdrop-filter: blur(15px);
    border: 1px solid var(--glass-border);
    padding: 20px;
    border-radius: 20px;
    text-align: center;
    min-width: 150px;
    flex: 1;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

#earn-coins-page .stat-box h3 {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 10px;
}

#earn-coins-page .stat-box .value {
    font-size: 2.2rem;
    font-weight: 700;
    background: linear-gradient(45deg, var(--accent-green), var(--accent-blue));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}

#earn-coins-page #resetTimer {
    font-size: 0.9rem;
    color: var(--accent-blue);
    margin-top: 15px;
    font-weight: 600;
}

#earn-coins-page .new-day-banner {
    background: linear-gradient(45deg, #4CAF50, #8BC34A);
    color: white;
    padding: 15px;
    border-radius: 15px;
    text-align: center;
    margin-bottom: 20px;
    font-weight: 600;
    display: none;
    animation: fadeIn 0.5s ease-out;
}

#earn-coins-page .task-list {
    display: grid;
    gap: 25px;
}

#earn-coins-page .task {
    background: var(--card-bg);
    backdrop-filter: blur(15px);
    border: 1px solid var(--glass-border);
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    animation: fadeInUp 0.6s ease-out;
    position: relative;
    overflow: hidden;
}

#earn-coins-page .task.completed {
    opacity: 0.6;
    filter: grayscale(70%);
}

#earn-coins-page .task:hover:not(.completed) {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.2), 0 0 20px rgba(255,215,0,0.4);
}

#earn-coins-page .task-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

#earn-coins-page .task-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
}

#earn-coins-page .task-coins {
    background: linear-gradient(45deg, gold, orange);
    padding: 5px 12px;
    border-radius: 20px;
    color: white;
    font-weight: 700;
    font-size: 0.9rem;
    box-shadow: 0 2px 8px rgba(255,165,0,0.3);
}

#earn-coins-page .ad-container {
    margin: 15px 0;
    text-align: center;
    background: rgba(0,0,0,0.1);
    border-radius: 10px;
    overflow: hidden;
    min-height: 90px; /* Ensure space for ad */
    display: flex;
    justify-content: center;
    align-items: center;
}

#earn-coins-page .ad-placeholder {
    color: var(--text-secondary);
    font-style: italic;
    font-size: 0.9rem;
}

#earn-coins-page .btns {
    display: flex;
    gap: 15px;
    margin-top: 20px;
    flex-wrap: wrap;
    justify-content: center;
}

#earn-coins-page .visit-btn,
#earn-coins-page .confirm-btn {
    padding: 12px 25px;
    border-radius: 30px;
    border: none;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

#earn-coins-page .visit-btn {
    background: linear-gradient(45deg, #00f2fe, #4facfe);
    color: white;
}
#earn-coins-page .visit-btn:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,242,254,0.4);
}
#earn-coins-page .visit-btn:disabled {
    background: #6c757d;
    cursor: not-allowed;
    opacity: 0.7;
    box-shadow: none;
}

#earn-coins-page .confirm-btn {
    background: linear-gradient(45deg, #4CAF50, #8BC34A);
    color: white;
}
#earn-coins-page .confirm-btn:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(76,175,80,0.4);
}
#earn-coins-page .confirm-btn:disabled {
    background: #6c757d;
    cursor: not-allowed;
    opacity: 0.7;
    box-shadow: none;
}

#earn-coins-page .progress-bar {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    margin-top: 15px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.1);
}

#earn-coins-page .progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #ff6b6b, #feca57);
    border-radius: 4px;
    transition: width 0.5s ease-in-out;
}

/* Animations for earn coins page */
@keyframes earn-coins-page-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

@keyframes earn-coins-page-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* NEW: Styling for Quiz Tasks */
.quiz-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 15px;
    justify-content: center; /* Center options */
}

.quiz-option-btn {
    background: var(--accent-blue);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 500;
    transition: all 0.2s ease;
    flex-grow: 1; /* Allow buttons to grow */
    min-width: 100px; /* Minimum width */
    max-width: 48%; /* Max width to allow two columns */
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.quiz-option-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,242,254,0.3);
}

.quiz-option-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
    background: #6c757d; /* Gray out disabled options */
}

.quiz-feedback {
    margin-top: 15px;
    font-weight: 600;
    text-align: center;
    padding: 10px;
    border-radius: 10px;
    display: none; /* Hidden by default */
}

.quiz-feedback.correct {
    background: rgba(76, 175, 80, 0.2); /* Green tint */
    color: #4CAF50;
    border: 1px solid #4CAF50;
}

.quiz-feedback.incorrect {
    background: rgba(244, 67, 54, 0.2); /* Red tint */
    color: #F44336;
    border: 1px solid #F44336;
}

/* Ensure disabled buttons on completed quiz tasks are distinct */
.task.completed .quiz-option-btn {
    background: #6c757d !important; /* Force gray background for completed */
    color: #e0e0e0 !important;
    cursor: not-allowed !important;
    box-shadow: none !important;
}

/* NEW: Styling for interactive notification box */
.app-notification { /* Renamed from .notification */
    position: fixed;
    bottom: 100px; /* Higher than toast */
    left: 50%;
    transform: translateX(-50%) scale(0.9);
    background: rgba(0, 0, 0, 0.9); /* Darker, more prominent */
    backdrop-filter: blur(15px);
    color: white;
    padding: 15px 30px; /* Slightly more padding */
    border-radius: 15px; /* Boxier for content + button */
    z-index: 1001;
    opacity: 0;
    transition: all 0.3s ease-out;
    box-shadow: 0 5px 25px rgba(0,0,0,0.4); /* Stronger shadow */
    display: flex; /* For vertical alignment of text and button */
    flex-direction: column;
    align-items: center;
    gap: 10px; /* Space between text and button */
    max-width: 90%; /* Responsive width */
    text-align: center;
    border: 1px solid rgba(255,255,255,0.15);
}

.app-notification.show {
    opacity: 1;
    transform: translateX(-50%) scale(1);
}

.app-notification p {
    margin: 0; /* Remove default paragraph margin */
    font-size: 1.1rem;
    font-weight: 500;
    line-height: 1.4;
}

.app-notification .notification-button {
    background: linear-gradient(45deg, #FFD700, #FFA500); /* Gold/Orange */
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    box-shadow: 0 3px 10px rgba(255,165,0,0.3);
    transition: all 0.2s ease;
}

.app-notification .notification-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255,165,0,0.5);
}


/* Mobile Responsiveness */
@media (max-width: 768px) {
    .app-header { padding: 15px 20px; }
    .logo { font-size: 1.4rem; }
    #home-screen h1 { font-size: 2.8rem; }
    #content-view { padding: 15px; }
    #content-title { font-size: 2rem; }
    .content-item { padding: 15px; } /* Smaller padding for items */
    .wallpaper-image { height: 180px; } /* Slightly smaller image on mobile */
    .image-title { font-size: 1.1rem; }
    .button-group { flex-direction: column; gap: 8px; } /* Stack buttons vertically */
    .download-btn, .set-wallpaper-btn, .share-btn { width: 100%; max-width: 250px; } /* Full width buttons */
    #side-menu { width: 100%; }
    .home-buttons { flex-direction: column; align-items: center; } /* Stack home buttons vertically */
    .cta-button, .share-app-button { width: 80%; max-width: 300px; } /* Give home buttons fixed width */
    #content-body { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); } /* Smaller grid items */

    #earn-coins-page h2 { font-size: 2.2rem; }
    #earn-coins-page .stat-box { min-width: unset; flex: 1 1 45%; }
    .app-notification { bottom: 20px; width: 95%; } /* Adjust notification position on small screens */
}
@media (max-width: 480px) {
    #home-screen h1 { font-size: 2.2rem; }
    .cta-button, .share-app-button { padding: 15px 35px; font-size: 1.1rem; }
    .content-item { padding: 15px; }
    .button-group { justify-content: center; } /* Keep small buttons centered on small screens */
    #earn-coins-page h2 { font-size: 1.8rem; }
    #earn-coins-page .stat-box { flex: 1 1 100%; }
    #earn-coins-page .btns { flex-direction: column; }
    .quiz-option-btn { max-width: 100%; } /* Stack quiz options vertically on very small screens */
}
</style>
</head>
<body>
    <div class="background-effects">
        <div class="floating-shapes">
            <div class="shape">A</div> <div class="shape">B</div> <div class="shape">C</div>
            <div class="shape">1</div> <div class="shape">2</div> <div class="shape">3</div>
            <div class="shape">‚≠ê</div> <div class="shape">üöÄ</div> <div class="shape">üí°</div>
            <div class="shape">‚úîÔ∏è</div> <div class="shape">üìö</div>
        </div>
    </div>
<header class="app-header">
    <a href="#" onclick="goBackToHome()" class="logo">‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä</a>
    <div class="header-controls">
        <div id="user-coin-display"><i class="fas fa-coins"></i> 0</div>
        <label class="theme-switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider"></span>
        </label>
        <button class="menu-btn" id="menu-open-btn">‚ò∞</button>
    </div>
</header>
<aside id="side-menu">
    <button class="menu-close-btn" id="menu-close-btn">√ó</button>
    <div id="side-menu-content-container">
        <!-- Categories will be populated here by JS -->
    </div>
</aside>
<main>
    <div id="home-screen">
        <h1>üñºÔ∏è ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä üåå</h1>
        <p>‡§Ö‡§™‡§®‡•á ‡§´‡•ã‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§î‡§∞ ‡§™‡•ç‡§∞‡•á‡§∞‡§£‡§æ‡§¶‡§æ‡§Ø‡§ï ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç‡•§ ‡§π‡§∞ ‡§Æ‡•Ç‡§° ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•õ‡§æ‡§∞‡•ã‡§Ç ‡§â‡§ö‡•ç‡§ö-‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§µ‡§æ‡§≤‡•á ‡§ö‡§ø‡§§‡•ç‡§∞‡•§</p>
        <div class="home-buttons">
            <button class="cta-button" id="cta-menu-btn">üöÄ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•ã‡§∞ ‡§ï‡§∞‡•á‡§Ç ‚ú®</button>
            <button class="share-app-button" onclick="shareApp()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
                </svg>
                ‡§ê‡§™ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç
            </button>
        </div>
    </div>
<div id="content-view">
    <div class="content-header">
        <button id="back-btn" onclick="goBackToHome()">‚¨ÖÔ∏è ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç</button>
        <h2 id="content-title"></h2>
    </div>
    <div id="content-body">
        <!-- Wallpapers will be populated here by JavaScript -->
    </div>
</div>

<!-- Earn Coins Page HTML -->
<div id="earn-coins-page">
    <div class="content-header">
        <button id="back-to-home-from-coins" onclick="goBackToHome()">‚¨ÖÔ∏è ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç</button>
        <h2>üí∞ ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§è‡§Å!</h2>
        <p>‡§π‡§∞ ‡§¶‡§ø‡§® ‡§®‡§è ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§® ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§</p>
    </div>
    <div class="stats-grid">
        <div class="stat-box">
            <h3>‡§ï‡•Å‡§≤ ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á</h3>
            <div class="value" id="coinCount">0</div>
        </div>
        <div class="stat-box">
            <h3>‡§Ü‡§ú ‡§™‡•Ç‡§∞‡•á ‡§π‡•Å‡§è ‡§ï‡§æ‡§∞‡•ç‡§Ø</h3>
            <div class="value" id="completedToday">0</div>
            <span id="totalTasks"></span>
        </div>
        <div class="stat-box">
            <h3>‡§Ü‡§ú ‡§ï‡§Æ‡§æ‡§è</h3>
            <div class="value" id="earnedToday">0</div>
        </div>
    </div>
    <div class="new-day-banner" id="newDayBanner">
        ‡§®‡§Ø‡§æ ‡§¶‡§ø‡§® ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à! ‡§∏‡§≠‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§
    </div>
    <p id="resetTimer" style="text-align: center; margin-bottom: 25px;"></p>
    <div class="task-list" id="taskList">
        <!-- Tasks will be populated here by JS -->
    </div>
</div>
</main>
<footer class="app-footer">
    <p>¬© 2024 ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä. Made with üíñ for your screens.</p>
</footer>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1234567890123456" crossorigin="anonymous"></script>
<script>
    // Wallpaper Data (using Pexels for example URLs)
    const contentData = {
        'nature-wallpapers': {
            title: 'üå≥ ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞',
            category: 'general',
            cost: 0, // Free
            items: [
                { src: 'https://images.pexels.com/photos/3408744/pexels-photo-3408744.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§™‡§π‡§æ‡§°‡§º‡•ã‡§Ç ‡§î‡§∞ ‡§¨‡§æ‡§¶‡§≤‡•ã‡§Ç ‡§∏‡•á ‡§¢‡§ï‡§æ ‡§Ü‡§∏‡§Æ‡§æ‡§®' },
                { src: 'https://images.pexels.com/photos/371589/pexels-photo-371589.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§π‡§∞‡•Ä ‡§ò‡§æ‡§∏ ‡§ï‡§æ ‡§Æ‡•à‡§¶‡§æ‡§®' },
                { src: 'https://images.pexels.com/photos/103123/pexels-photo-103123.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ù‡§∞‡§®‡•á ‡§ï‡§æ ‡§Æ‡§®‡§Æ‡•ã‡§π‡§ï ‡§¶‡•É‡§∂‡•ç‡§Ø' },
                { src: 'https://images.pexels.com/photos/108941/pexels-photo-108941.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∏‡§Æ‡•Å‡§¶‡•ç‡§∞ ‡§§‡§ü ‡§™‡§∞ ‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∏‡•ç‡§§' },
                { src: 'https://images.pexels.com/photos/206359/pexels-photo-206359.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§§‡§æ‡§∞‡•ã‡§Ç ‡§≠‡§∞‡§æ ‡§Ü‡§ï‡§æ‡§∂' },
                { src: 'https://images.pexels.com/photos/417074/pexels-photo-417074.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∂‡§æ‡§Ç‡§§ ‡§ù‡•Ä‡§≤ ‡§î‡§∞ ‡§™‡§π‡§æ‡§°‡§º' },
                { src: 'https://images.pexels.com/photos/15286/pexels-photo-15286.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§ú‡§Ç‡§ó‡§≤ ‡§ï‡§æ ‡§™‡§•' },
                { src: 'https://images.pexels.com/photos/158739/pexels-photo-158739.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§π‡§∞‡•á-‡§≠‡§∞‡•á ‡§ñ‡•á‡§§' },
                { src: 'https://images.pexels.com/photos/691668/pexels-photo-691668.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ä‡§Ç‡§ö‡•á ‡§™‡§π‡§æ‡§°‡§º ‡§î‡§∞ ‡§ù‡•Ä‡§≤' },
                { src: 'https://images.pexels.com/photos/145719/pexels-photo-145719.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ñ‡•Å‡§≤‡§æ ‡§Ü‡§∏‡§Æ‡§æ‡§® ‡§î‡§∞ ‡§™‡•á‡§°‡§º' }, 


                { src: 'abstract-geometric-floating.html', title: '‡§´‡•ç‡§≤‡•ã‡§ü‡§ø‡§Ç‡§ó ‡§ú‡§ø‡§Ø‡•ã‡§Æ‡•á‡§ü‡•ç‡§∞‡§ø‡§ï ‡§∂‡•á‡§™‡•ç‡§∏' },
        { src: 'abstract-wavy-lines.html', title: '‡§ó‡§§‡§ø‡§∂‡•Ä‡§≤ ‡§µ‡•á‡§µ‡•Ä ‡§≤‡§æ‡§á‡§®‡•ç‡§∏' },
        { src: 'abstract-neon-grid.html', title: '‡§®‡§ø‡§Ø‡•â‡§® 3D ‡§ó‡•ç‡§∞‡§ø‡§°' },
        { src: 'abstract-animated-orb.html', title: '‡§ö‡§Æ‡§ï‡§§‡§æ ‡§π‡•Å‡§Ü ‡§ë‡§∞‡•ç‡§¨' },
        { src: 'abstract-colorful-swipes.html', title: '‡§∞‡§Ç‡§ó‡•Ä‡§® ‡§∏‡•ç‡§µ‡§æ‡§á‡§™‡•ç‡§∏' }
   

   
       
            ]
        },
        'abstract-wallpapers': {
            title: 'üé® ‡§è‡§¨‡•ç‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§ï‡•ç‡§ü ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞',
            category: 'general',
            cost: 0, // Free
            items: [
                { src: 'https://images.pexels.com/photos/2114014/pexels-photo-2114014.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∞‡§Ç‡§ó‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡§ø‡§∂‡•ç‡§∞‡§£' },
                { src: 'https://images.pexels.com/photos/211756/pexels-photo-211756.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§®‡•Ä‡§≤‡•á ‡§∞‡§Ç‡§ó ‡§ï‡•Ä ‡§Ö‡§Æ‡•Ç‡§∞‡•ç‡§§ ‡§∞‡•á‡§ñ‡§æ‡§è‡§Ç' },
                { src: 'https://images.pexels.com/photos/242236/pexels-photo-242236.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ú‡•ç‡§Ø‡§æ‡§Æ‡§ø‡§§‡•Ä‡§Ø ‡§™‡•à‡§ü‡§∞‡•ç‡§®' },
                { src: 'https://images.pexels.com/photos/204096/pexels-photo-204096.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§´‡•ç‡§∞‡•Ä ‡§´‡•ç‡§≤‡•ã‡§á‡§Ç‡§ó ‡§≤‡§æ‡§á‡§ü‡•ç‡§∏' },
                { src: 'https://images.pexels.com/photos/956999/pexels-photo-956999.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§™‡§ø‡§Ç‡§ï ‡§î‡§∞ ‡§¨‡•ç‡§≤‡•Ç ‡§∂‡•á‡§°‡•ç‡§∏' },
                { src: 'https://images.pexels.com/photos/235985/pexels-photo-235985.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ß‡•Å‡§Ç‡§ß‡§≤‡•Ä ‡§∞‡•ã‡§∂‡§®‡•Ä' },
                { src: 'https://images.pexels.com/photos/544109/pexels-photo-544109.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ü‡•á‡§ï‡•ç‡§∏‡§ö‡§∞‡§° ‡§∏‡§∞‡§´‡•á‡§∏' },
                { src: 'https://images.pexels.com/photos/531880/pexels-photo-531880.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§Ö‡§Æ‡•Ç‡§∞‡•ç‡§§ ‡§¨‡•ç‡§≤‡•à‡§ï ‡§™‡•à‡§ü‡§∞‡•ç‡§®' },
                { src: 'https://images.pexels.com/photos/220201/pexels-photo-220201.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∏‡§∞‡•ç‡§ï‡•Å‡§≤‡§∞ ‡§™‡•à‡§ü‡§∞‡•ç‡§®' },
                { src: 'https://images.pexels.com/photos/1097450/pexels-photo-1097450.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§Ü‡§ï‡§æ‡§∂‡•Ä‡§Ø ‡§∞‡•ã‡§∂‡§®‡•Ä' }
            ]
        },
        'car-wallpapers': {
            title: 'üöó ‡§ï‡§æ‡§∞ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞',
            category: 'premium',
            cost: 200, // Premium
            items: [
                { src: 'https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ï‡•ç‡§≤‡§æ‡§∏‡§ø‡§ï ‡§Æ‡§∞‡•ç‡§∏‡§ø‡§°‡•Ä‡§ú' },
                { src: 'https://images.pexels.com/photos/120049/pexels-photo-120049.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∞‡•á‡§° ‡§∏‡•ç‡§™‡•ã‡§∞‡•ç‡§ü‡•ç‡§∏ ‡§ï‡§æ‡§∞' },
                { src: 'https://images.pexels.com/photos/112460/pexels-photo-112460.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§¨‡•ç‡§≤‡•à‡§ï ‡§≤‡§ó‡•ç‡§ú‡§∞‡•Ä ‡§ï‡§æ‡§∞' },
                { src: 'https://images.pexels.com/photos/3586798/pexels-photo-3586798.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∞‡•á‡§∏‡§ø‡§Ç‡§ó ‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§¶‡•É‡§∂‡•ç‡§Ø' },
                { src: 'https://images.pexels.com/photos/2449600/pexels-photo-2449600.png?auto=compress&cs=tinysrgb&w=600', title: '‡§Æ‡•â‡§°‡§∞‡•ç‡§® ‡§ï‡•â‡§®‡•ç‡§∏‡•á‡§™‡•ç‡§ü ‡§ï‡§æ‡§∞' },
                { src: 'https://images.pexels.com/photos/707046/pexels-photo-707046.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§Ø‡•á‡§≤‡•ã ‡§∏‡•ç‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§æ‡§∞' },
                { src: 'https://images.pexels.com/photos/1545743/pexels-photo-1545743.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§µ‡§ø‡§Ç‡§ü‡•á‡§ú ‡§ï‡§æ‡§∞' },
                { src: 'https://images.pexels.com/photos/3729464/pexels-photo-3729464.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§¨‡•ç‡§≤‡•à‡§ï ‡§∏‡•Å‡§™‡§∞‡§ï‡§æ‡§∞' },
                { src: 'https://images.pexels.com/photos/116675/pexels-photo-116675.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∏‡•ç‡§™‡•ã‡§∞‡•ç‡§ü‡•Ä ‡§ï‡§æ‡§∞' },
                { src: 'https://images.pexels.com/photos/210019/pexels-photo-210019.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§á‡§Ç‡§ü‡•Ä‡§∞‡§ø‡§Ø‡§∞' }
            ]
        },
        'animal-wallpapers': {
            title: 'üêæ ‡§ú‡§æ‡§®‡§µ‡§∞ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞',
            category: 'premium',
            cost: 300, // Premium
            items: [
                { src: 'https://images.pexels.com/photos/247502/pexels-photo-247502.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§µ‡§ø‡§∂‡§æ‡§≤‡§ï‡§æ‡§Ø ‡§¨‡§æ‡§ò' },
                { src: 'https://images.pexels.com/photos/459198/pexels-photo-459198.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∂‡§æ‡§Ç‡§§ ‡§π‡§æ‡§•‡•Ä' },
                { src: 'https://images.pexels.com/photos/52500/pexels-photo-52500.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ú‡§Ç‡§ó‡§≤ ‡§ï‡§æ ‡§∞‡§æ‡§ú‡§æ ‡§∂‡•á‡§∞' },
                { src: 'https://images.pexels.com/photos/33045/lion-lioness-africa-predator.jpg?auto=compress&cs=tinysrgb&w=600', title: '‡§∂‡•á‡§∞‡§®‡•Ä ‡§ï‡§æ ‡§ï‡•ç‡§≤‡•ã‡§ú-‡§Ö‡§™' },
                { src: 'https://images.pexels.com/photos/460823/pexels-photo-460823.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§ò‡•ã‡§°‡§º‡§æ' },
                { src: 'https://images.pexels.com/photos/2078065/pexels-photo-2078065.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§™‡•ç‡§Ø‡§æ‡§∞‡•Ä ‡§¨‡§ø‡§≤‡•ç‡§≤‡•Ä' },
                { src: 'https://images.pexels.com/photos/1805164/pexels-photo-1805164.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§µ‡§´‡§æ‡§¶‡§æ‡§∞ ‡§ï‡•Å‡§§‡•ç‡§§‡§æ' },
                { src: 'https://images.pexels.com/photos/47547/squirrel-animal-cute-rodents-47547.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§õ‡•ã‡§ü‡•Ä ‡§ó‡§ø‡§≤‡§π‡§∞‡•Ä' },
                { src: 'https://images.pexels.com/photos/259200/pexels-photo-259200.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∞‡§Ç‡§ó‡•Ä‡§® ‡§§‡•ã‡§§‡§æ' },
                { src: 'https://images.pexels.com/photos/66898/elephant-asian-elephant-male-elephant-66898.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§è‡§∂‡§ø‡§Ø‡§æ‡§à ‡§π‡§æ‡§•‡•Ä' }
            ]
        },
        'space-wallpapers': {
            title: 'üåå ‡§Ö‡§Ç‡§§‡§∞‡§ø‡§ï‡•ç‡§∑ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞',
            category: 'premium',
            cost: 300, // Premium
            items: [
                { src: 'https://images.pexels.com/photos/220201/pexels-photo-220201.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ‡§Ç‡§°‡•Ä‡§Ø ‡§®‡•Ä‡§π‡§æ‡§∞‡§ø‡§ï‡§æ' },
                { src: 'https://images.pexels.com/photos/110854/pexels-photo-110854.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ö‡§Æ‡§ï‡§§‡§æ ‡§π‡•Å‡§Ü ‡§ó‡•ç‡§∞‡§π' },
                { src: 'https://images.pexels.com/photos/23611/pexels-photo-23611.jpg?auto=compress&cs=tinysrgb&w=600', title: '‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä ‡§ï‡§æ ‡§¶‡•É‡§∂‡•ç‡§Ø' },
                { src: 'https://images.pexels.com/photos/355904/pexels-photo-355904.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∏‡•ç‡§™‡•á‡§∏‡§∂‡§ü‡§≤ ‡§Ö‡§Ç‡§§‡§∞‡§ø‡§ï‡•ç‡§∑ ‡§Æ‡•á‡§Ç' },
                { src: 'https://images.pexels.com/photos/73873/star-cluster-rosette-nebula-ngc2237-73873.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§§‡§æ‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§ù‡•Å‡§Ç‡§°' },
                { src: 'https://images.pexels.com/photos/1169754/pexels-photo-1169754.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§™‡•É‡§•‡•ç‡§µ‡•Ä ‡§ï‡§æ ‡§µ‡§ø‡§π‡§Ç‡§ó‡§Æ ‡§¶‡•É‡§∂‡•ç‡§Ø' },
                { src: 'https://images.pexels.com/photos/39561/solar-system-space-earth-nasa-39561.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§∏‡•å‡§∞‡§Æ‡§Ç‡§°‡§≤' },
                { src: 'https://images.pexels.com/photos/240366/pexels-photo-240366.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§ö‡§Ç‡§¶‡•ç‡§∞‡§Æ‡§æ ‡§ï‡§æ ‡§™‡§∞‡§ø‡§¶‡•É‡§∂‡•ç‡§Ø' },
                { src: 'https://images.pexels.com/photos/1583196/pexels-photo-1583196.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§è‡§ï ‡§¶‡•Ç‡§∞ ‡§ï‡§æ ‡§ó‡•ç‡§∞‡§π' },
                { src: 'https://images.pexels.com/photos/1618606/pexels-photo-1618606.jpeg?auto=compress&cs=tinysrgb&w=600', title: '‡§Ö‡§Ç‡§§‡§∞‡§ø‡§ï‡•ç‡§∑ ‡§Æ‡•á‡§Ç ‡§®‡•Ä‡§≤‡•á ‡§∞‡§Ç‡§ó' }
            ]
        }
    };

// DOM Elements
const homeScreen = document.getElementById('home-screen');
const contentView = document.getElementById('content-view');
const earnCoinsPage = document.getElementById('earn-coins-page');
const contentTitle = document.getElementById('content-title');
const contentBody = document.getElementById('content-body');
const sideMenu = document.getElementById('side-menu');
const menuOpenBtn = document.getElementById('menu-open-btn');
const menuCloseBtn = document.getElementById('menu-close-btn');
const ctaMenuBtn = document.getElementById('cta-menu-btn');
const themeToggle = document.getElementById('theme-toggle');
const menuCategoriesContainer = document.getElementById('side-menu-content-container');

// Global utility function for toasts (short, non-interactive messages)
function showToast(message) {
    const existingToast = document.querySelector('.toast');
    if (existingToast) {
        existingToast.remove(); // Remove existing toast to avoid multiple
    }
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = message;
    document.body.appendChild(toast);
    // Remove toast after 3 seconds
    setTimeout(() => { toast.remove(); }, 3000);
}

// NEW: Global utility function for notifications (can be interactive, longer messages)
function showNotification(message, buttonText = null, buttonCallback = null, duration = 5000) {
    const existingNotif = document.querySelector('.app-notification');
    if (existingNotif) {
        existingNotif.remove(); // Remove any existing notification
    }

    const notification = document.createElement('div');
    notification.className = 'app-notification';
    notification.innerHTML = `
        <p>${message}</p>
        ${buttonText ? `<button class="notification-button">${buttonText}</button>` : ''}
    `;
    document.body.appendChild(notification);

    // Show with transition
    setTimeout(() => {
        notification.classList.add('show');
    }, 10);

    // Add button functionality
    if (buttonText) { // Only add click handler if buttonText is provided
        const btn = notification.querySelector('.notification-button');
        btn.onclick = () => {
            if (buttonCallback) { // Execute callback if it exists
                buttonCallback();
            }
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300); // Remove after fade out
        };
    }

    // Auto-hide after duration, if no button or if button action handles removal
    if (!buttonText || (buttonText && buttonCallback)) { 
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, duration);
    }
}


// --- Main App Logic (Coins & Unlocks) ---
window.funsparkApp = {
    userCoins: 0,
    unlockedCategories: {}, // Store category IDs that are unlocked

    init: function() {
        this.loadCoins();
        this.loadUnlockedCategories();
        this.updateCoinDisplay();
        this.updateSideMenu(); // Call this after loading unlocked categories
    },

    loadCoins: function() {
        this.userCoins = parseInt(localStorage.getItem('userCoins') || '0');
        // Initial coins for new users (optional, remove if you want users to earn from 0)
        if (this.userCoins === 0 && !localStorage.getItem('firstTimeUser')) {
            this.userCoins = 50; // Give some starting coins
            localStorage.setItem('firstTimeUser', 'true');
            this.saveCoins();
        }
    },

    saveCoins: function() {
        localStorage.setItem('userCoins', this.userCoins.toString());
        this.updateCoinDisplay(); // Update UI after saving
        // Also update earn coins page coin display if it's visible
        if (earnCoinsPageLogic.coinDisplay) {
             earnCoinsPageLogic.coinDisplay.textContent = this.userCoins;
        }
    },

    addCoins: function(amount) {
        this.userCoins += amount;
        this.saveCoins();
        showToast(`+${amount} ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á! ‡§ï‡•Å‡§≤: ${this.userCoins}`);
    },

    deductCoins: function(amount) {
        if (this.userCoins >= amount) {
            this.userCoins -= amount;
            this.saveCoins();
            showToast(`-${amount} ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á! ‡§ï‡•Å‡§≤: ${this.userCoins}`);
            return true;
        }
        return false;
    },

    loadUnlockedCategories: function() {
        const unlocked = localStorage.getItem('unlockedCategories');
        if (unlocked) {
            try {
                this.unlockedCategories = JSON.parse(unlocked);
            } catch (e) {
                console.error("Error parsing unlocked categories:", e);
                this.unlockedCategories = {};
            }
        } else {
            this.unlockedCategories = {};
        }
        // Unlock free categories by default on first load or if not already marked
        for (const key in contentData) {
            if (contentData[key].cost === 0 && !this.unlockedCategories[key]) {
                this.unlockedCategories[key] = true;
            }
        }
        this.saveUnlockedCategories(); // Save defaults if they were just set
    },

    saveUnlockedCategories: function() {
        localStorage.setItem('unlockedCategories', JSON.stringify(this.unlockedCategories));
        this.updateSideMenu(); // Update side menu display
    },

    isUnlocked: function(categoryKey) {
        return this.unlockedCategories[categoryKey] === true;
    },

    unlockCategory: function(categoryKey) {
        if (this.isUnlocked(categoryKey)) {
            showToast('‡§Ø‡§π ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§π‡•Ä ‡§Ö‡§®‡§≤‡•â‡§ï ‡§π‡•à!');
            return true; // Already unlocked
        }

        const cost = contentData[categoryKey].cost || 0;
        if (cost === 0) {
            this.unlockedCategories[categoryKey] = true;
            this.saveUnlockedCategories();
            showToast(`‡§∂‡•ç‡§∞‡•á‡§£‡•Ä '${contentData[categoryKey].title}' ‡§Ö‡§®‡§≤‡•â‡§ï ‡§π‡•Å‡§à (‡§Æ‡•Å‡§´‡•ç‡§§)!`);
            return true;
        }

        if (this.deductCoins(cost)) {
            this.unlockedCategories[categoryKey] = true;
            this.saveUnlockedCategories();
            showToast(`üéâ '${contentData[categoryKey].title}' ‡§Ö‡§®‡§≤‡•â‡§ï ‡§π‡•Å‡§Ü!`);
            return true;
        }
        return false; // Not enough coins (handled by handleCategoryClick calling showNotification)
    },

    // Update the coin display in the header
    updateCoinDisplay: function() {
        const coinElement = document.getElementById('user-coin-display'); 
        if (coinElement) {
            coinElement.innerHTML = `<i class="fas fa-coins"></i> ${this.userCoins}`;
        }
    },

    // Function to re-render the side menu based on unlock status
    updateSideMenu: function() {
        populateMenu(); // Call the existing populateMenu function
    }
};


// --- Theme Switcher ---
function setTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
    themeToggle.checked = theme === 'light'; // Checkbox is true for light theme
}

themeToggle.addEventListener('change', () => {
    setTheme(themeToggle.checked ? 'light' : 'dark');
});

// Load saved theme or prefer system theme
const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
setTheme(savedTheme);


// --- Menu Logic ---
function toggleMenu() {
    sideMenu.classList.toggle('open');
}

menuOpenBtn.addEventListener('click', toggleMenu);
menuCloseBtn.addEventListener('click', toggleMenu);
ctaMenuBtn.addEventListener('click', toggleMenu);

// --- Populate Side Menu ---
function populateMenu() {
    const categories = {
        'general': '‚ú® ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Ç',
        'premium': 'üíé ‡§™‡•ç‡§∞‡•Ä‡§Æ‡§ø‡§Ø‡§Æ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞',
        'earn-coins': 'üí∞ ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§è‡§Å',
    };

    let menuHTML = '';
    for (const catKey in categories) {
        if (catKey === 'earn-coins') {
            menuHTML += `<h3>${categories[catKey]}</h3>`;
            menuHTML += `<a href="#" onclick="showEarnCoinsPage()">üí∞ ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§è‡§Å</a>`;
            continue;
        }

        menuHTML += `<h3>${categories[catKey]}</h3>`;
        for (const itemKey in contentData) {
            if (contentData[itemKey].category === catKey) {
                const isLocked = !window.funsparkApp.isUnlocked(itemKey);
                const cost = contentData[itemKey].cost || 0;
                const lockIcon = isLocked ? ` <span class="lock-icon">üîí ${cost}</span>` : '';
                const linkClass = isLocked ? 'locked-category' : 'unlocked-category';

                menuHTML += `<a href="#" class="${linkClass}" onclick="handleCategoryClick('${itemKey}')">${contentData[itemKey].title}${lockIcon}</a>`;
            }
        }
    }
    if (menuCategoriesContainer) {
        menuCategoriesContainer.innerHTML = menuHTML;
    }
}


// New function to handle category clicks (unlocking logic)
function handleCategoryClick(categoryKey) {
    if (window.funsparkApp.isUnlocked(categoryKey)) {
        showContent(categoryKey); // Show content if unlocked
    } else {
        const cost = contentData[categoryKey].cost || 0;
        
        // If user has enough coins, ask for confirmation to unlock
        if (window.funsparkApp.userCoins >= cost) {
            const confirmUnlock = confirm(`‡§Ø‡§π ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä '${contentData[categoryKey].title}' ‡§ñ‡•ã‡§≤‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ${cost} ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§≤‡§ó‡•á‡§Ç‡§ó‡•á‡•§ ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§á‡§∏‡•á ‡§Ö‡§®‡§≤‡•â‡§ï ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡•á‡§Ç‡§ó‡•á?`);
            if (confirmUnlock) {
                if (window.funsparkApp.unlockCategory(categoryKey)) {
                    showContent(categoryKey); // Show content after successful unlock
                }
            }
        } else {
            // User does NOT have enough coins, show interactive notification
            const neededCoins = cost - window.funsparkApp.userCoins;
            showNotification(
                `‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç! ‡§Ü‡§™‡§ï‡•ã ‡§á‡§∏ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ï‡•ã ‡§ñ‡•ã‡§≤‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ${neededCoins} ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§î‡§∞ ‡§ö‡§æ‡§π‡§ø‡§è‡•§`,
                "‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§è‡§Å", // Button text
                showEarnCoinsPage, // Callback function for the button
                7000 // Duration for the notification (7 seconds)
            );
        }
    }
}


// --- View Switching Logic ---
function showPage(pageId) {
    homeScreen.style.display = 'none';
    contentView.style.display = 'none';
    earnCoinsPage.style.display = 'none';

    if (sideMenu.classList.contains('open')) {
        toggleMenu(); // Close side menu if open
    }
    window.scrollTo(0, 0); // Scroll to top

    if (pageId === 'home-screen') {
        document.getElementById(pageId).style.display = 'flex';
        // Cleanup earn coins page if navigating away from it
        if (earnCoinsPageLogic.resetTimerInterval) {
            earnCoinsPageLogic.cleanup();
        }
    } else if (pageId === 'content-view') {
        document.getElementById(pageId).style.display = 'block';
    } else if (pageId === 'earn-coins-page') {
         document.getElementById(pageId).style.display = 'block';
         earnCoinsPageLogic.initGame(); // Initialize earn coins page logic
    }
}

// --- NEW: Displaying Wallpaper Content ---
function showContent(category) {
    const data = contentData[category];
    if (!data) return;

    showPage('content-view');

    contentTitle.innerHTML = data.title;
    contentBody.innerHTML = ''; // Clear previous content

    data.items.forEach(item => {
        // Escape single quotes and double quotes for use in JS function calls in HTML
        const imageUrl = item.src.replace(/'/g, "\\'").replace(/"/g, '"');
        const imageTitle = item.title.replace(/'/g, "\\'").replace(/"/g, '"');
        // Full text for sharing (link to image + app)
        const fullShareText = `‡§á‡§∏ ‡§∂‡§æ‡§®‡§¶‡§æ‡§∞ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ï‡•ã ‡§¶‡•á‡§ñ‡§ø‡§è: ${item.title} - ${item.src}\n\n‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä ‡§ê‡§™ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§î‡§∞ ‡§≠‡•Ä ‡§∂‡§æ‡§®‡§¶‡§æ‡§∞ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§™‡§æ‡§è‡§Ç: ${window.location.href}`;

        const contentItemHTML = `
            <div class="content-item">
                <img class="wallpaper-image" src="${item.src}" alt="${item.title}" loading="lazy">
                <div class="image-title">${item.title}</div>
                <div class="button-group">
                    <button class="download-btn" onclick="downloadImage('${imageUrl}', '${imageTitle}.jpg', this)" title="‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç">
                       <i class="fas fa-download"></i> ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
                    </button>
                    <button class="set-wallpaper-btn" onclick="setAsWallpaper('${imageUrl}', '${imageTitle}.jpg', this)" title="‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç">
                       <i class="fas fa-image"></i> ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
                    </button>
                    <button class="share-btn" onclick="shareWallpaper('${imageUrl}', '${fullShareText}', this)" title="‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç">
                        <i class="fas fa-share-alt"></i> ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                </div>
            </div>
        `;
        contentBody.innerHTML += contentItemHTML;
    });
}

function showEarnCoinsPage() {
    showPage('earn-coins-page');
}

function goBackToHome() {
    showPage('home-screen');
}

// Assigning initial display modes
document.addEventListener('DOMContentLoaded', () => {
    homeScreen.style.display = 'flex';
    contentView.style.display = 'none';
    earnCoinsPage.style.display = 'none';
});

// --- NEW: Wallpaper Utility Functions ---
async function downloadImage(imageUrl, filename, buttonElement) {
    const originalTitle = buttonElement.title;
    const originalText = buttonElement.innerHTML;
    buttonElement.disabled = true; // Disable button during operation
    buttonElement.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';

    try {
        const response = await fetch(imageUrl);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
        
        showToast('‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§Ø‡§æ! üéâ');
        buttonElement.title = `‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§Ø‡§æ! ‚úîÔ∏è`;
        buttonElement.innerHTML = '<i class="fas fa-download"></i> ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç';
        setTimeout(() => { buttonElement.title = originalTitle; buttonElement.disabled = false; }, 1500);

    } catch (error) {
        console.error('Download failed:', error);
        showToast('‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤! üòû');
        buttonElement.title = `‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤! üòû`;
        buttonElement.innerHTML = originalText; // Restore original text
        setTimeout(() => { buttonElement.title = originalTitle; buttonElement.disabled = false; }, 1500);
    }
}

function setAsWallpaper(imageUrl, filename, buttonElement) {
    downloadImage(imageUrl, filename, buttonElement); // First, download the image
    showNotification(
        "‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ó‡•à‡§≤‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§á‡§∏‡•á ‡§Æ‡•à‡§®‡•ç‡§Ø‡•Å‡§Ö‡§≤ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§",
        "‡§∏‡§Æ‡§ù ‡§ó‡§Ø‡§æ", // Button text
        null, // No specific callback needed for the button
        8000 // Duration for the notification
    );
}

async function shareWallpaper(imageUrl, shareTextContent, buttonElement) {
    const originalTitle = buttonElement.title;
    const originalText = buttonElement.innerHTML;
    buttonElement.disabled = true; // Disable button during operation
    buttonElement.innerHTML = '<i class="fas fa-share-alt"></i> ‡§∂‡•á‡§Ø‡§∞ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';

    const shareData = {
        title: '‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä',
        text: shareTextContent.replace(/\\'/g, "'").replace(/"/g, '"'), // Unescape quotes
        url: imageUrl // Link to the image itself
    };
    try {
        if (navigator.share) {
            await navigator.share(shareData);
            showToast('‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ! üòä');
            buttonElement.title = `‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ! ‚úîÔ∏è`;
            buttonElement.innerHTML = '<i class="fas fa-share-alt"></i> ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç';
        } else {
            await navigator.clipboard.writeText(shareData.text);
            showToast('‡§∂‡•á‡§Ø‡§∞ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ! üëç');
            buttonElement.title = `‡§ï‡•â‡§™‡•Ä ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ! ‚úîÔ∏è`;
            buttonElement.innerHTML = '<i class="fas fa-share-alt"></i> ‡§ï‡•â‡§™‡•Ä ‡§ï‡§ø‡§Ø‡§æ';
        }
        setTimeout(() => { buttonElement.title = originalTitle; buttonElement.disabled = false; }, 1500);

    } catch (err) {
        if (err.name !== 'AbortError') { // User cancelled the share dialog
           console.error('Failed to share:', err);
           showToast('‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤! üòû');
           buttonElement.title = `‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤! üòû`;
           buttonElement.innerHTML = originalText; // Restore original text
        } else {
           // User cancelled, so just revert button state without an error toast
           showToast('‡§∂‡•á‡§Ø‡§∞ ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§');
        }
        setTimeout(() => { buttonElement.title = originalTitle; buttonElement.disabled = false; }, 1500);
    }
}

async function shareApp() {
    const appShareData = {
        title: '‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä ‡§ê‡§™',
        text: '‡§Ø‡§π ‡§∂‡§æ‡§®‡§¶‡§æ‡§∞ "‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä" ‡§ê‡§™ ‡§Ü‡§™‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§´‡•ã‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§¶‡•ç‡§≠‡•Å‡§§ ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ñ‡•ã‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡•á‡§ó‡§æ‡•§ ‡§Ö‡§≠‡•Ä ‡§ü‡•ç‡§∞‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç!',
        url: window.location.href
    };

    try {
        if (navigator.share) {
            await navigator.share(appShareData);
            showToast('‡§ê‡§™ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ! ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! üòä');
        } else {
            await navigator.clipboard.writeText(appShareData.text + '\n' + appShareData.url);
            showToast('‡§∂‡•á‡§Ø‡§∞ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§ê‡§™ ‡§ï‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•â‡§™‡•Ä ‡§π‡•ã ‡§ó‡§Ø‡§æ! üëç');
        }
    } catch (err) {
        if (err.name !== 'AbortError') {
            console.error('Failed to share app:', err);
            showToast('‡§ê‡§™ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤! üòû');
        }
    }
}


// --- EARN COINS PAGE LOGIC ---
const earnCoinsPageLogic = {
    tasks: [
        // Existing Link Tasks (can be thought of as "view sponsored content")
        { id: 1, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 1 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 5, link: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjudMFtNpRU_s0-aqCvyaki0E7pJdCt07ERv_9D5y2d8mkqwpfkb8PV-shiZevAx24nUz93ZFDErbz6tHnWUVtgV0TKraVHxFLR-U4sUnTdA64COFCWWLeCM9eQFihNzJvtfGJzzLZOxy9EFmoLYeaMXaTEjEQn8DaXHfn77pRwrtK_S_cWAIy1FuqjW7yo/s500/IMG-20250410-WA0005.jpg" },
        { id: 2, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 2 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/120049/pexels-photo-120049.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 3, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 3 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 2, link: "https://images.pexels.com/photos/3586798/pexels-photo-3586798.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 4, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 4 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/170811/pexels-photo-170811.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 5, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 5 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 8, link: "https://images.pexels.com/photos/2449600/pexels-photo-2449600.png?auto=compress&cs=tinysrgb&w=600" },
        { id: 6, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 6 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/707046/pexels-photo-707046.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 7, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 7 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 2, link: "https://images.pexels.com/photos/1545743/pexels-photo-1545743.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 8, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 8 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 5, link: "https://images.pexels.com/photos/3729464/pexels-photo-3729464.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 9, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 9 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 2, link: "https://images.pexels.com/photos/116675/pexels-photo-116675.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 10, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 10 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 8, link: "https://images.pexels.com/photos/210019/pexels-photo-210019.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 11, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 11 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 2, link: "https://images.pexels.com/photos/136872/pexels-photo-136872.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 12, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 12 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/241316/pexels-photo-241316.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 13, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 13 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 2, link: "https://images.pexels.com/photos/3802510/pexels-photo-3802510.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 14, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 14 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/337909/pexels-photo-337909.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 15, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 15 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 10, link: "https://images.pexels.com/photos/733745/pexels-photo-733745.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 16, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 16 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/1007410/pexels-photo-1007410.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 17, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 17 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 2, link: "https://images.pexels.com/photos/2365572/pexels-photo-2365572.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 18, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 18 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/1402787/pexels-photo-1402787.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 19, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 19 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 9, link: "https://images.pexels.com/photos/1637859/pexels-photo-1637859.jpeg?auto=compress&cs=tinysrgb&w=600" },
        { id: 20, type: 'link', title: "‡§≤‡§ø‡§Ç‡§ï 20 ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç (‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç)", coins: 3, link: "https://images.pexels.com/photos/1779502/pexels-photo-1779502.jpeg?auto=compress&cs=tinysrgb&w=600" },
        // NEW: Quiz Tasks (example questions, can be customized for wallpapers)
        { id: 21, type: 'quiz', title: "‡§ï‡•ç‡§µ‡§ø‡§ú‡§º: ‡§µ‡•â‡§≤‡§™‡•á‡§™‡§∞ ‡§ú‡•ç‡§û‡§æ‡§®", coins: 15, question: "‡§ï‡•å‡§® ‡§∏‡§æ ‡§∞‡§Ç‡§ó ‡§Ö‡§ï‡•ç‡§∏‡§∞ ‡§∂‡§æ‡§Ç‡§§‡§ø ‡§ï‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï ‡§Æ‡§æ‡§®‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", options: ["‡§≤‡§æ‡§≤", "‡§®‡•Ä‡§≤‡§æ", "‡§™‡•Ä‡§≤‡§æ", "‡§π‡§∞‡§æ"], answer: "‡§®‡•Ä‡§≤‡§æ" },
        { id: 22, type: 'quiz', title: "‡§ï‡•ç‡§µ‡§ø‡§ú‡§º: ‡§™‡•ç‡§∞‡§ï‡•É‡§§‡§ø ‡§™‡§π‡§ö‡§æ‡§®‡•á‡§Ç", coins: 10, question: "‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡§æ ‡§Æ‡§π‡§æ‡§∏‡§æ‡§ó‡§∞ ‡§ï‡•å‡§® ‡§∏‡§æ ‡§π‡•à?", options: ["‡§Ö‡§ü‡§≤‡§æ‡§Ç‡§ü‡§ø‡§ï", "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø", "‡§Ü‡§∞‡•ç‡§ï‡§ü‡§ø‡§ï", "‡§™‡•ç‡§∞‡§∂‡§æ‡§Ç‡§§"], answer: "‡§™‡•ç‡§∞‡§∂‡§æ‡§Ç‡§§" },
        { id: 23, type: 'quiz', title: "‡§ï‡•ç‡§µ‡§ø‡§ú‡§º: ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§Ü‡§∞‡•ç‡§ü", coins: 12, question: "PNG ‡§´‡§º‡§æ‡§á‡§≤‡•á‡§Ç ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§õ‡§µ‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç?", options: ["Lossy Compressed", "Transparent Backgrounds", "Animated", "Vector Graphics"], answer: "Transparent Backgrounds" }

 ],
    bannerAds: [
        // REPLACE ca-pub-xxxxxxxxxx and data-ad-slot="1111111111" with your AdSense IDs
        // ‡§Ü‡§™‡§ï‡•ã ‡§Ø‡§π‡§æ‡§Ç ‡§Ö‡§™‡§®‡•á ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï AdSense ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§ï ‡§Ü‡§à‡§°‡•Ä (publisher ID) ‡§î‡§∞ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§á‡§ï‡§æ‡§à ‡§Ü‡§à‡§°‡•Ä (ad unit ID) ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§
        { html: `<div class="ad-container"><ins class="adsbygoogle" style="display:block;width:100%;height:90px;" data-ad-client="ca-pub-1234567890123456" data-ad-slot="1111111111" data-ad-format="rectangle" data-full-width-responsive="true"></ins></div>` }
        // ‡§Ü‡§™ ‡§Ø‡§π‡§æ‡§Ç ‡§î‡§∞ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞‡•á‡§∂‡§® ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç ‡§Ø‡§¶‡§ø ‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó ‡§∏‡•ç‡§≤‡•â‡§ü/‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§π‡•à‡§Ç
    ],
    gameData: { completedTasks: {}, dailyEarnings: {}, lastResetDate: null },
    taskTimers: {},
    resetTimerInterval: null,
    coinDisplay: null, taskList: null, completedTodayDisplay: null,
    earnedTodayDisplay: null, resetTimerDisplay: null, newDayBanner: null, totalTasksDisplay: null,

    getTodayString: function() { return new Date().toLocaleDateString('en-US'); },
    getNextMidnight: function() {
        const t = new Date(); t.setDate(t.getDate() + 1); t.setHours(0,0,0,0); return t;
    },
    formatTimeUntilReset: function() {
        const n = new Date(), m = this.getNextMidnight(), d = m-n;
        const h = Math.floor(d/(1e3*60*60)), min = Math.floor(d%(1e3*60*60)/(1e3*60)), s = Math.floor(d%(1e3*60)/1e3);
        return `${h.toString().padStart(2,'0')}:${min.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    },
    loadDailyTaskState: function() {
        const s = localStorage.getItem('funsparkEarnCoinsDailyState');
        if(s){
            const p = JSON.parse(s);
            this.gameData.completedTasks = (typeof p.completedTasks === 'object' && p.completedTasks !== null) ? p.completedTasks : {};
            this.gameData.dailyEarnings = (typeof p.dailyEarnings === 'object' && p.dailyEarnings !== null) ? p.dailyEarnings : {};
            this.gameData.lastResetDate = typeof p.lastResetDate === 'string' ? p.lastResetDate : null;
        }
    },
    saveDailyTaskState: function() { localStorage.setItem('funsparkEarnCoinsDailyState',JSON.stringify(this.gameData)); },
    checkForNewDay: function() {
        const t = this.getTodayString();
        if (this.gameData.lastResetDate && this.gameData.lastResetDate !== t) {
            if(this.newDayBanner) this.newDayBanner.style.display = 'block';
            setTimeout(() => { if(this.newDayBanner) this.newDayBanner.style.display = 'none'; }, 5000);
            this.gameData.completedTasks = {};
            this.gameData.dailyEarnings[t] = 0; // Reset daily earnings for new day
            showToast("üåÖ ‡§®‡§Ø‡§æ ‡§¶‡§ø‡§® ‡§∂‡•Å‡§∞‡•Ç! ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§Ö‡§¨ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡§Ç!");
        }
        this.gameData.lastResetDate = t;
        this.saveDailyTaskState();
    },
    initGame: function() {
        this.coinDisplay = document.getElementById('coinCount');
        this.taskList = document.getElementById('taskList');
        this.completedTodayDisplay = document.getElementById('completedToday');
        this.earnedTodayDisplay = document.getElementById('earnedToday');
        this.resetTimerDisplay = document.getElementById('resetTimer');
        this.newDayBanner = document.getElementById('newDayBanner');
        this.totalTasksDisplay = document.getElementById('totalTasks');

        if (!this.taskList) { console.error("‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§è‡§Å ‡§™‡•É‡§∑‡•ç‡§† ‡§ï‡•á ‡§§‡§§‡•ç‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•á‡•§"); return; }

        this.loadDailyTaskState();
        this.checkForNewDay();
        if(this.coinDisplay) this.coinDisplay.textContent = window.funsparkApp.userCoins;
        if(this.totalTasksDisplay) this.totalTasksDisplay.textContent = `/ ${this.tasks.length} ‡§ï‡•Å‡§≤`;

        this.updateDailyDisplay();
        this.renderTasks();
        this.startResetTimer();
    },
    startResetTimer: function() {
        if (this.resetTimerInterval) clearInterval(this.resetTimerInterval);
        this.resetTimerInterval = setInterval(() => {
            if (this.resetTimerDisplay) this.resetTimerDisplay.textContent = `‡§Ö‡§ó‡§≤‡§æ ‡§∞‡•Ä‡§∏‡•á‡§ü: ${this.formatTimeUntilReset()}`;
            const n = new Date();
            // Check if it's past midnight for a new day
            if (n.getHours()===0 && n.getMinutes()===0 && (n.getSeconds()===0 || n.getSeconds()===1)) {
                this.checkForNewDay();
                this.renderTasks();
                this.updateDailyDisplay();
            }
        }, 1000);
        if (this.resetTimerDisplay) this.resetTimerDisplay.textContent = `‡§Ö‡§ó‡§≤‡§æ ‡§∞‡•Ä‡§∏‡•á‡§ü: ${this.formatTimeUntilReset()}`;
    },
    markTaskDone: function(id, coinsEarned) {
        const t = this.getTodayString();
        this.gameData.completedTasks[id] = t;
        this.gameData.dailyEarnings[t] = (this.gameData.dailyEarnings[t] || 0) + coinsEarned; // Add to daily earnings
        this.saveDailyTaskState();
        this.updateDailyDisplay();
    },
    isTaskCompletedToday: function(id) {
        const t = this.getTodayString(); return this.gameData.completedTasks[id] === t;
    },
    updateDailyDisplay: function() {
        const t = this.getTodayString();
        const cToday = Object.values(this.gameData.completedTasks).filter(d => d === t).length;
        const eToday = this.gameData.dailyEarnings[t] || 0;
        if(this.completedTodayDisplay) this.completedTodayDisplay.textContent = cToday;
        if(this.earnedTodayDisplay) this.earnedTodayDisplay.textContent = eToday;
        if(this.coinDisplay) this.coinDisplay.textContent = window.funsparkApp.userCoins; // Update from global coins
    },
    renderTasks: function() {
        if (!this.taskList) return;
        this.taskList.innerHTML = '';
        this.tasks.forEach((task, index) => {
            const taskDiv = document.createElement("div");
            taskDiv.className = "task";
            taskDiv.style.animationDelay = `${index * 0.1}s`;

            const isCompleted = this.isTaskCompletedToday(task.id);
            if (isCompleted) taskDiv.classList.add('completed');

            const taskHeader = document.createElement("div");
            taskHeader.className = "task-header";
            const title = document.createElement("div");
            title.className = "task-title";
            title.textContent = task.title;
            const coinBadge = document.createElement("div");
            coinBadge.className = "task-coins";
            coinBadge.textContent = `+${task.coins}`;
            taskHeader.appendChild(title);
            taskHeader.appendChild(coinBadge);
            taskDiv.appendChild(taskHeader);

            // Add the ad container for every task type
            const bannerAdContainer = document.createElement("div");
            bannerAdContainer.className = "ad-container"; // Ensure this class for default styling
            const adConfig = this.bannerAds[index % this.bannerAds.length];
            bannerAdContainer.innerHTML = adConfig.html;
            taskDiv.appendChild(bannerAdContainer);

            // Dynamically load AdSense ads
            // Ensure this is called after the ad container is added to the DOM
            // NOTE: Make sure the script tag for adsbygoogle.js is included in your HTML <head>
            setTimeout(() => {
                try {
                    if (window.adsbygoogle && bannerAdContainer.querySelector('.adsbygoogle')) {
                        // Push an empty object to the adsbygoogle array to load the ad
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    }
                } catch (e) {
                    console.error("AdSense render error:", e);
                    // Fallback to a placeholder if AdSense fails to load
                    const adPlaceholder = bannerAdContainer.querySelector('.ad-container .adsbygoogle');
                    if (adPlaceholder && !adPlaceholder.hasChildNodes()) {
                        adPlaceholder.parentElement.innerHTML = '<div class="ad-placeholder">‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§™‡§® ‡§Ø‡§π‡§æ‡§Å ‡§≤‡•ã‡§° ‡§π‡•ã‡§ó‡§æ</div>';
                    }
                }
            }, 600 + index * 150); // Stagger ad loading for better performance


            if (task.type === 'link') {
                // Existing link task logic
                const btnContainer = document.createElement("div");
                btnContainer.className = "btns";
                const visitBtn = document.createElement("button");
                visitBtn.className = "visit-btn";
                visitBtn.textContent = "üîó ‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç";
                let startTime = null;
                const confirmBtn = document.createElement("button");
                confirmBtn.className = "confirm-btn";
                confirmBtn.textContent = "‡§Æ‡•à‡§Ç ‡§µ‡§æ‡§™‡§∏ ‡§Ü ‡§ó‡§Ø‡§æ ‡§π‡•Ç‡§Å";
                confirmBtn.disabled = true;
                const progressBar = document.createElement("div");
                progressBar.className = "progress-bar";
                const progressFill = document.createElement("div");
                progressFill.className = "progress-fill";
                progressBar.appendChild(progressFill);

                if (isCompleted) {
                    visitBtn.disabled = true;
                    visitBtn.textContent = "‚úÖ ‡§Ü‡§ú ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü";
                    confirmBtn.disabled = true;
                    confirmBtn.textContent = "‚úÖ ‡§Ü‡§ú ‡§π‡•ã ‡§ó‡§Ø‡§æ";
                    progressFill.style.width = "100%";
                }

                visitBtn.onclick = () => {
                    if (this.isTaskCompletedToday(task.id)) return;
                    window.open(task.link, "_blank");
                    startTime = Date.now();
                    visitBtn.disabled = true;
                    visitBtn.textContent = "üîó ‡§≤‡§ø‡§Ç‡§ï ‡§ñ‡•ã‡§≤‡§æ ‡§ó‡§Ø‡§æ - 5 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç";

                    const existingInstruction = taskDiv.querySelector('.instruction-message');
                    if (existingInstruction) existingInstruction.remove();

                    const instruction = document.createElement("div");
                    instruction.className = "instruction-message";
                    instruction.innerHTML = `<div style="background: linear-gradient(45deg, #ff6b6b, #feca57); color: white; padding: 10px; border-radius: 10px; margin: 10px 0; text-align: center; font-weight: bold;">üì¢ ‡§≤‡§ø‡§Ç‡§ï ‡§µ‡§æ‡§≤‡•á ‡§™‡•á‡§ú ‡§™‡§∞ 5 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§∞‡•Å‡§ï‡§ø‡§è, ‡§´‡§ø‡§∞ '‡§Æ‡•à‡§Ç ‡§µ‡§æ‡§™‡§∏ ‡§Ü ‡§ó‡§Ø‡§æ ‡§π‡•Ç‡§Å' ‡§¶‡§¨‡§æ‡§è‡§Ç</div>`;
                    // Insert before btnContainer, which is appended later in this branch
                    taskDiv.insertBefore(instruction, btnContainer); 
                    
                    confirmBtn.disabled = true;
                    confirmBtn.textContent = "‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç...";
                    let timeLeft = 5;
                    progressFill.style.width = "0%";

                    const timer = setInterval(() => {
                        timeLeft--;
                        confirmBtn.textContent = `‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞ ‡§∞‡•Å‡§ï‡•á‡§Ç (${timeLeft}s)`;
                        progressFill.style.width = `${((5 - timeLeft) / 5) * 100}%`;
                        if (timeLeft <= 0) {
                            clearInterval(timer);
                            confirmBtn.textContent = "‡§Æ‡•à‡§Ç ‡§µ‡§æ‡§™‡§∏ ‡§Ü ‡§ó‡§Ø‡§æ ‡§π‡•Ç‡§Å ‚úÖ";
                            confirmBtn.disabled = false;
                            if (confirmBtn.style) confirmBtn.style.animation = "earn-coins-page-blink 1s infinite";
                            if (instruction.parentNode) instruction.remove();
                            showToast("‚úÖ ‡§Ö‡§¨ ‡§Ü‡§™ ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡•ç‡§≤‡•á‡§Æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!");
                        }
                    }, 1000);
                    this.taskTimers[task.id] = timer;
                };

                confirmBtn.onclick = () => {
                    if (this.isTaskCompletedToday(task.id)) return;
                    if (!startTime) {
                        showToast("‚ö†Ô∏è ‡§™‡§π‡§≤‡•á '‡§≤‡§ø‡§Ç‡§ï ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç' ‡§¨‡§ü‡§® ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç!");
                        if (confirmBtn.style) confirmBtn.style.animation = "earn-coins-page-shake 0.5s";
                        setTimeout(() => { if (confirmBtn.style) confirmBtn.style.animation = ""; }, 500);
                        return;
                    }
                    const diff = (Date.now() - startTime) / 1000;
                    if (!confirmBtn.disabled && diff >= 5) {
                        window.funsparkApp.addCoins(task.coins);
                        this.markTaskDone(task.id, task.coins);
                        taskDiv.classList.add('completed');
                        visitBtn.disabled = true;
                        visitBtn.textContent = "‚úÖ ‡§Ü‡§ú ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü";
                        confirmBtn.disabled = true;
                        confirmBtn.textContent = "‚úÖ ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§Æ‡§ø‡§≤ ‡§ó‡§è";
                        if (confirmBtn.style) confirmBtn.style.animation = "none";
                        if (this.taskTimers[task.id]) clearInterval(this.taskTimers[task.id]);
                        showToast(`üéâ ‡§¨‡§ß‡§æ‡§à! +${task.coins} ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§è!`);
                    } else if (confirmBtn.disabled) {
                        showToast(`‚è∞ ‡§Ö‡§≠‡•Ä ${Math.ceil(5 - diff) > 0 ? Math.ceil(5 - diff) : 0} ‡§∏‡•á‡§ï‡§Ç‡§° ‡§î‡§∞ ‡§∞‡•Å‡§ï‡§ø‡§è!`);
                        if (confirmBtn.style) confirmBtn.style.animation = "earn-coins-page-shake 0.5s";
                        setTimeout(() => { if (confirmBtn.style) confirmBtn.style.animation = ""; }, 500);
                    } else if (diff < 5) {
                         showToast(`‚ö†Ô∏è ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§µ‡§æ‡§™‡§∏ ‡§Ü ‡§ó‡§è! ${Math.ceil(5 - diff)} ‡§∏‡•á‡§ï‡§Ç‡§° ‡§î‡§∞ ‡§∞‡•Å‡§ï‡§ø‡§è‡•§`);
                         if (confirmBtn.style) confirmBtn.style.animation = "earn-coins-page-shake 0.5s";
                         setTimeout(() => { if (confirmBtn.style) confirmBtn.style.animation = ""; }, 500);
                    }
                };

                btnContainer.appendChild(visitBtn);
                btnContainer.appendChild(confirmBtn);
                taskDiv.appendChild(btnContainer);
                taskDiv.appendChild(progressBar);

            } else if (task.type === 'quiz') {
                // New quiz task logic
                const quizQuestion = document.createElement('p');
                quizQuestion.style.fontWeight = '600';
                quizQuestion.style.fontSize = '1.1rem';
                quizQuestion.style.marginBottom = '15px';
                quizQuestion.style.textAlign = 'center';
                quizQuestion.textContent = task.question;
                taskDiv.appendChild(quizQuestion);

                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'quiz-options';
                task.options.forEach(option => {
                    const optionBtn = document.createElement('button');
                    optionBtn.className = 'quiz-option-btn';
                    optionBtn.textContent = option;
                    optionBtn.onclick = () => {
                        if (isCompleted) return; // Prevent clicking if already completed

                        const feedbackDiv = taskDiv.querySelector('.quiz-feedback') || document.createElement('div');
                        feedbackDiv.className = 'quiz-feedback';
                        feedbackDiv.style.display = 'block'; // Show feedback

                        // Disable all options after selection
                        optionsContainer.querySelectorAll('.quiz-option-btn').forEach(btn => {
                            btn.disabled = true;
                        });

                        if (option === task.answer) {
                            feedbackDiv.textContent = '‡§∏‡§π‡•Ä ‡§ú‡§µ‡§æ‡§¨! üéâ';
                            feedbackDiv.classList.remove('incorrect');
                            feedbackDiv.classList.add('correct');
                            // Highlight the correct answer
                            optionBtn.style.background = '#4CAF50';
                            optionBtn.style.color = 'white';

                            if (!isCompleted) { // Only award coins if not already completed
                                window.funsparkApp.addCoins(task.coins);
                                this.markTaskDone(task.id, task.coins);
                                taskDiv.classList.add('completed');
                                showToast(`üéâ ‡§¨‡§ß‡§æ‡§à! +${task.coins} ‡§∏‡§ø‡§ï‡•ç‡§ï‡•á ‡§ï‡§Æ‡§æ‡§è!`);
                            }
                        } else {
                            feedbackDiv.textContent = `‡§ó‡§≤‡§§ ‡§ú‡§µ‡§æ‡§¨‡•§ ‡§∏‡§π‡•Ä: "${task.answer}"`;
                            feedbackDiv.classList.remove('correct');
                            feedbackDiv.classList.add('incorrect');
                            // Highlight selected incorrect option
                            optionBtn.style.background = '#F44336';
                            optionBtn.style.color = 'white';

                            // Optionally highlight the correct answer if incorrect was chosen
                            optionsContainer.querySelectorAll('.quiz-option-btn').forEach(btn => {
                                if (btn.textContent === task.answer) {
                                    btn.style.background = '#4CAF50'; // Green for correct
                                    btn.style.color = 'white';
                                }
                            });
                            showToast(`ü§î ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç!`);
                        }
                        
                    };
                    optionsContainer.appendChild(optionBtn);

                    // Disable options if task is already completed or if correct option was selected
                    if (isCompleted) {
                        optionBtn.disabled = true;
                        if (option === task.answer) {
                            optionBtn.style.background = '#4CAF50'; // Show correct answer
                            optionBtn.style.color = 'white';
                        }
                    }
                });
                taskDiv.appendChild(optionsContainer);

                // Add a feedback div for quiz results
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'quiz-feedback';
                taskDiv.appendChild(feedbackDiv);
            }

            this.taskList.appendChild(taskDiv);
        });
    },
    cleanup: function() {
        if (this.resetTimerInterval) { clearInterval(this.resetTimerInterval); this.resetTimerInterval=null; }
        Object.values(this.taskTimers).forEach(t => clearInterval(t)); this.taskTimers={};
    }
};


// Initialize the main app logic when the DOM is fully loaded
document.addEventListener('DOMContentLoaded', () => {
    window.funsparkApp.init();
});
</script>
</body>
</html>